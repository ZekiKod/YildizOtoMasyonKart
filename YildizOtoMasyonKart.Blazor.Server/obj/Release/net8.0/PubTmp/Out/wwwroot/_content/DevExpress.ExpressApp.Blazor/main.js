(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{initializeLayoutEditor:()=>b});var n={};e.r(n),e.d(n,{dragSplitter:()=>X,registerDotnetReference:()=>_,releaseSplitter:()=>K,resetStyleRelativePosition:()=>J,resetStyleSplitterPosition:()=>Q,unregisterDotnetReference:()=>W});class i extends HTMLElement{constructor(){super(),this._isInitialized=!1}connectedCallback(){this._isInitialized||(this._isInitialized=!0,this.addEventListener("click",(e=>{const t=e.composedPath().find((e=>{var t;return"a"===(null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase())}));t&&e.preventDefault()})),this.addEventListener("click",(e=>{if(e.ctrlKey){e.stopImmediatePropagation();const t=e.composedPath().find((e=>{var t;const n=e;return"a"===(null===(t=n.tagName)||void 0===t?void 0:t.toLowerCase())&&"#"===n.getAttribute("href")}));if(t)e.preventDefault();else{let t=new MouseEvent("auxclick",e);this.dispatchEvent(t)}}}),{capture:!0}),this.addEventListener("auxclick",(e=>{const t=e.composedPath().find((e=>{var t;const n=e;return"a"===(null===(t=n.tagName)||void 0===t?void 0:t.toLowerCase())&&"#"===n.getAttribute("href")}));t&&e.preventDefault()})))}}class o{getMainElement(e){return document.getElementById(e)}getShadowElement(e){return"string"==typeof e?document.querySelector(e):e}removeGlobalClickHandler(e){(null==e?void 0:e.GlobalClickHandler)&&(document.removeEventListener("pointerdown",e.GlobalClickHandler),delete e.GlobalClickHandler)}addGlobalClickHandler(e,t){e.GlobalClickHandler=n=>{if(n.target instanceof HTMLElement){var i=n.target.closest("dxbl-dropdown");e!==n.target&&(e.contains(n.target)||i&&e.contains(i.placementTargetElement))||t(n)}},document.addEventListener("pointerdown",e.GlobalClickHandler)}isVisible(e){return this.getMainElement(e).classList.contains("show-dropdown")}toggle(e,t){this.isVisible(e)?this.hide(e):this.show(e,t)}show(e,t){const n=this.getMainElement(e),i=this.getShadowElement(t);this.addGlobalClickHandler(n,(t=>{t.target instanceof HTMLElement&&!i.contains(t.target)&&this.hide(e)})),n.classList.add("show-dropdown")}hide(e){var t=this.getMainElement(e);t&&(this.removeGlobalClickHandler(t),t.classList.remove("show-dropdown"),t._onhide&&t._onhide())}}const s=/DevExpress.Blazor.Themes/,r="_content/DevExpress.Blazor.Themes/bootstrap-external.bs5.min.css",l={};class a{open(e){const t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),n=document.getElementById(e);n&&n.dispatchEvent(t)}canShowFileDialog(e){return!l[e]&&!document.getElementById(e).disabled}setIsUploading(e,t){l[e.id]=t}init(e){const t=e.inputElement;l[t.id]=!1,t.addEventListener("change",(function(){const n=t.files[0];if(!n)return;const i=e.maxFileSize;if(i&&i>0&&n.size>i)alert(e.fileSizeLimitMessage);else{const i={name:n.name,size:n.size,type:n.type};t.readPromise=new Promise(((e,t)=>{const i=new FileReader;i.onload=function(){e(i.result)},i.onerror=function(e){t(e)},i.readAsArrayBuffer(n)})),e.instance.invokeMethodAsync("Upload",i)}}))}clear(e){e.value=""}readFileData(e,t,n){return e.readPromise.then((e=>new Uint8Array(e,t,n)))}dispose(e){e&&delete l[e.id]}}var d,c,u;!function(e){e.Item="LayoutItem",e.Group="LayoutGroup",e.TabGroup="LayoutTabbedGroup",e.TabContent="LayoutTabGroup"}(d||(d={})),function(e){e.Top="Top",e.Bottom="Bottom",e.Left="Left",e.Right="Right",e.Inside="Inside"}(c||(c={}));class m{constructor(e,t,n,i,o,s){this.dropItemDeltaX=0,this.dropItemDeltaY=0,this.isHidden=!0,this.dragInProgress=!1,this.dropZone=null,this.cursorClass=null,this.dropzoneSuffix=null,this.target=e,this.element=e.element,this.titlePromise=t,this.startY=i,this.startX=n,this.dropItemDeltaX=0,this.dropItemDeltaY=0,this.layoutTree=o,this.dragElement=s,this.lastCaptureTimestamp=new Date}getTarget(){return this.target}start(){this.dragInProgress=!0,this.highlightDraggedElement(),this.titlePromise.then((e=>this.dragInProgress?this.dragElement.firstElementChild.innerText=e:null))}update(e,t){if(this.dragInProgress){if(this.isHidden){const n=this.element.getBoundingClientRect(),i=e-this.startX,o=t-this.startY;(i*i+o*o>200||e<n.left||n.right<e||t<n.top||n.bottom<t)&&(this.dragElement.classList.remove("d-none"),this.isHidden=!1)}if(!this.isHidden){const n=this.dragElement.getBoundingClientRect();this.dropItemDeltaX+=e-(n.left+4),this.dropItemDeltaY+=t-(n.top+4),this.dragElement.style.transform=`translate(${this.dropItemDeltaX}px,${this.dropItemDeltaY}px)`,this.captureDropZone(e,t)}}}finish(e,t){this.dragInProgress=!1,this.releaseDropZone(),this.restoreElementStyles(),this.dragElement.style.removeProperty("transform"),this.dragElement.classList.add("d-none");const n=this.getLayoutDropZone(e,t,document.elementsFromPoint(e,t));return n?{draggedNode:this.target,dropZoneNode:n.node,position:n.position}:null}highlightDraggedElement(){this.element.classList.add("xaf-layouteditor-dragging-element")}restoreElementStyles(){this.dragElement.style.transform="",this.element.classList.remove("xaf-layouteditor-dragging-element")}releaseDropZone(){this.dropZone&&this.dropzoneSuffix&&(this.dropZone.element.classList.remove("xaf-layouteditor-dropzone"+this.dropzoneSuffix),this.dropZone.element.classList.remove("xaf-layouteditor-dropzone"),this.dropZone=null,this.dropzoneSuffix=null),this.cursorClass&&(this.dragElement.classList.remove(this.cursorClass),this.cursorClass=null)}captureDropZone(e,t){const n=new Date;if(n.valueOf()-this.lastCaptureTimestamp.valueOf()<m.MIN_MILLISECONDS_BETWEEN_UPDATES)return;this.lastCaptureTimestamp=n,this.releaseDropZone();const i=this.getLayoutDropZone(e,t,document.elementsFromPoint(e,t));if(!i)return;const o=i.position,s=i.node;let r;switch(o){case c.Top:r="-top";break;case c.Bottom:r="-bottom";break;case c.Left:r="-left";break;case c.Right:r="-right";break;default:r="-whole"}this.cursorClass="xaf-layouteditor-dropcursor"+r,this.dragElement.classList.add(this.cursorClass),this.dropzoneSuffix=r,s.element.classList.add("xaf-layouteditor-dropzone"+this.dropzoneSuffix),s.element.classList.add("xaf-layouteditor-dropzone"),this.dropZone=s}getDropZone(e,t){return document.elementsFromPoint(e,t).findIndex((e=>e.classList.contains("main")||e.classList.contains("dropdown-menu")||e.classList.contains("dxbl-window-dialog"))),null}getLayoutDropZone(e,t,n){var i;if(this.isHidden)return null;let o=null,s=null;for(let e of n)if(e!==this.dragElement){if(e===this.element)return null;if(this.layoutTree.isLayoutRoot(e))return null;if(e.classList.contains("xaf-layouteditor-menu-hiddenitems"))return{node:this.layoutTree.getNodeById("xaf-layouteditor-menu-hiddenitems"),position:c.Inside};if(e.classList.contains("dxbl-row")&&(e=e.parentElement),e.classList.contains("dxbl-fl-tab-content")&&(e=e.parentElement),o=this.layoutTree.getNodeByElement(e),o){s=e;break}}for(let e=o;null!==e;e=e.parent)if(e===this.target)return null;if(null==o)return null;const r=s.getBoundingClientRect();let l,a;if(o.type===d.Item){if("xaf-layouteditor-menu-hiddenitems"===(null===(i=o.parent)||void 0===i?void 0:i.id))return{node:o.parent,position:c.Inside};[l,a]=this.calculateDropPosition(e,t,r)}else{if(0===o.children.length)return{node:o,position:c.Inside};if([l,a]=this.calculateDropPosition(e,t,r),s===o.element){let n=o;for(let i of o.children){if(i.element===this.element)continue;const o=i.element.getBoundingClientRect();o.left<e&&e<o.right&&(t<o.top&&o.top-t<l&&(l=o.top-t,a=c.Top,n=i),o.bottom<t&&t-o.bottom<l&&(l=t-o.bottom,a=c.Bottom,n=i))}return{node:n,position:a}}}return{node:o,position:a}}calculateDropPosition(e,t,n){const i=[[t-n.top,c.Top],[n.bottom-t,c.Bottom],[e-n.left,c.Left],[n.right-e,c.Right]];let o=i.reduce(((e,t)=>t[0]<e[0]?t:e));return o[0]<10?o:i[2][0]<n.width/3?i[2]:i[3][0]<n.width/3?i[3]:i[0][0]<n.height/2?i[0]:i[1]}}m.MIN_MILLISECONDS_BETWEEN_UPDATES=66;class h{constructor(e,t){if(this.deltaX=0,this.resizeInProgress=!1,null===t.parent)throw new Error("Orphan element");this.leftNode=e;const n=e.element.getBoundingClientRect();this.leftWidth=n.width;const i=window.getComputedStyle(e.element);this.leftInitWidth=i.width,this.leftInitMaxWidth=i.maxWidth,this.rightNode=t;const o=t.element.getBoundingClientRect();this.rightWidth=o.width;const s=window.getComputedStyle(t.element);this.rightInitWidth=s.width,this.rightInitMaxWidth=s.maxWidth,this.startingX=o.x}start(){this.resizeInProgress=!0,this.highlightResizedNode()}update(e){if(!this.resizeInProgress)return;if("100%"===this.rightInitWidth)return;const t=e-this.startingX,n=this.leftWidth+t,i=this.rightWidth-t;if(i<150||n<150)return;this.deltaX=t;const o=n/this.leftWidth,s=i/this.rightWidth;this.leftNode.element.style.width=`calc(${this.leftInitWidth} * ${o} - 0.5px)`,this.leftNode.element.style.maxWidth=`calc(${this.leftInitMaxWidth} * ${o} - 0.5px)`,this.rightNode.element.style.width=`calc(${this.rightInitWidth} * ${s} - 0.5px)`,this.rightNode.element.style.maxWidth=`calc(${this.rightInitMaxWidth} * ${s} - 0.5px)`}finish(){return this.resizeInProgress=!1,this.resetNodeStyles(),this.leftNode?{leftNode:this.leftNode,rightNode:this.rightNode,shiftRatio:this.deltaX/(this.leftWidth+this.rightWidth)}:null}highlightResizedNode(){this.leftNode.element.classList.add("xaf-layouteditor-resized-item"),this.rightNode.element.classList.add("xaf-layouteditor-resized-item")}resetNodeStyles(){this.leftNode.element.style.width="",this.leftNode.element.style.maxWidth="",this.leftNode.element.classList.remove("xaf-layouteditor-resized-item"),this.rightNode.element.style.width="",this.rightNode.element.style.maxWidth="",this.rightNode.element.classList.remove("xaf-layouteditor-resized-item")}}class p{constructor(e){this.dotnetHelper=e}onElementResizedAsync(e){return this.dotnetHelper.invokeMethodAsync("OnElementResized",e)}onElementDroppedAsync(e){return this.dotnetHelper.invokeMethodAsync("OnElementDropped",e)}onElementContextMenuAsync(e,t,n){return this.dotnetHelper.invokeMethodAsync("OnElementContextMenuAsync",e,t,n)}onElementSelectedAsync(e){return this.dotnetHelper.invokeMethodAsync("OnElementSelected",e)}getElementTitleAsync(e){return this.dotnetHelper.invokeMethodAsync("GetElementTitle",e)}}class g{constructor(e,t,n,i,o){this.options=e,this.children=t,this.ref=n,this.rootElement=i,this.formElement=o}getElementId(e){var t;return e.matches(this.options.tabSelector)?e.getAttribute(this.options.tabIdAttributeName):(null===(t=e.children.item(0))||void 0===t?void 0:t.matches(this.options.formItemIdSelector))?e.children.item(0).getAttribute(this.options.formItemIdAttributeName):e.getAttribute(this.options.idAttributeName)}findFormItem(e){var t,n;return null!==(n=null===(t=this.formElement)||void 0===t?void 0:t.querySelector(`${this.options.formItemIdSelector}[${this.options.formItemIdAttributeName}="${e}"]`))&&void 0!==n?n:null}isLayoutNode(e){let t=this.getElementId(e);return null!==t&&t in this.ref}isLayoutItem(e){var t,n;return null!==(n=(null===(t=this.getNodeByElement(e))||void 0===t?void 0:t.type)===d.Item)&&void 0!==n&&n}isLayoutGroup(e){var t,n;return null!==(n=(null===(t=this.getNodeByElement(e))||void 0===t?void 0:t.type)!==d.Item)&&void 0!==n&&n}getNodeById(e){return null!==e?this.ref[e]:null}getNodeByElement(e){let t=this.getElementId(e);return null!==t?this.ref[t]:null}getClosestNodeId(e){let t=null;for(;null!==e;){let n=this.getElementId(e);if(null!==n){if(n in this.ref)return n;null===t&&(t=n)}e=e.parentElement}return t}dfs(e,t){t(e);for(let n of e.children)this.dfs(n,t)}forEach(e){for(let t of this.children)this.dfs(t,e)}isLayoutRoot(e){return g.isLayoutRoot(e)}static isLayoutRoot(e){return e.matches&&e.matches(g.mainClassSelector)}static isLayoutRootFilter(e){return g.mainClassFilter[g.mainClassList.find((t=>e.classList.contains(t)))]}}u=g,g.mainClassFilter={"xaf-layouteditor-menu":!0,"main-content":!0,"nested-content":!1,"xaf-layouteditor-menu-hiddenitems":!1,"xaf-masterdetail-detailview":!0,"xaf-masterdetail-detailview-placeholder":!1,"xaf-masterdetail-container":!1,"dxbl-grid":!1,"xaf-richedit":!1,"dx-designer":!1,"dxbl-modal-root":!1,"dropdown-menu":!1,"xaf-prevent-contextmenu":!1},g.mainClassList=Object.keys(u.mainClassFilter),g.mainClassSelector="."+u.mainClassList.join(", .");class f extends HTMLElement{constructor(){super(...arguments),this.control=null}setControl(e){this.control=e}disconnectedCallback(){var e;null===(e=this.control)||void 0===e||e.dispose()}}class v{constructor(e,t,n){this.disposed=!1,this.designMode=!1,this.customizationFormContent=null,this.draggingItem=null,this.currentDragTarget=null,this.currentResizeTarget=null,this.onSplitterPointerDownBound=this.onSplitterPointerDown.bind(this),this.onElementPointerDownBound=this.onElementPointerDown.bind(this),this.onFormPointerDownBound=this.onPointerDownForm.bind(this),this.onPointerMoveBound=this.onPointerMove.bind(this),this.onPointerUpBound=this.onPointerUp.bind(this),this.onLayoutContextMenuBound=this.onLayoutContextMenu.bind(this),this.onFormContextMenuBound=this.onFormContextMenu.bind(this),this.onElementContextMenuBound=this.onElementContextMenu.bind(this),this.elementReference=e,this.componentReference=t,this.containerElement=e.parentElement;let i=e.parentElement;for(;null!=i&&!i.classList.contains("main");)i=i.parentElement;this.mainElement=i,this.options=n,this.layoutTree=new g(n,[],{},e,null),this.resizeSplitters=[],e.setControl(this),this.containerElement.addEventListener("contextmenu",this.onLayoutContextMenuBound)}scrollToTreeViewNode(e){var t,n;const i=this.layoutTree.getNodeById(e),o=window.scrollX,s=window.scrollY;null===(n=null===(t=this.layoutTree.findFormItem(e))||void 0===t?void 0:t.parentElement)||void 0===n||n.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"}),window.scrollTo({left:o,top:s,behavior:"instant"}),null==i||i.element.scrollIntoView({block:"nearest",inline:"nearest"})}updateState(e,t,n){this.customizationFormContent=t,this.draggingItem=n,this.setDesignMode(e)}setDesignMode(e){var t,n;this.designMode=e,e?(null===(t=this.mainElement)||void 0===t||t.classList.add("design-mode"),this.rebuildLayoutTree()):(null===(n=this.mainElement)||void 0===n||n.classList.remove("design-mode"),this.clearLayoutTree())}stopDragActions(e,t){document.removeEventListener("pointerup",this.onPointerUpBound),null!=this.currentDragTarget&&this.currentDragTarget.finish(e,t),null!=this.currentResizeTarget&&this.currentResizeTarget.finish()}onSplitterPointerDown(e){let t=e.target.parentElement,n=this.layoutTree.getNodeByElement(t);if(n||(t=t.parentElement,n=this.layoutTree.getNodeByElement(t)),!n)throw new Error("Couln't find node for the splitter");return e.preventDefault(),e.stopImmediatePropagation(),this.stopDragActions(e.clientX,e.clientY),this.currentResizeTarget=new h(n.prev,n),this.currentResizeTarget.start(),this.elementReference.classList.add("xaf-layouteditor-mode-resizing"),document.addEventListener("pointermove",this.onPointerMoveBound),document.addEventListener("pointerup",this.onPointerUpBound),!0}onElementPointerDown(e){var t;if(this.disposed||!this.designMode||this.currentDragTarget||0!==e.button||document.body.clientWidth<768)return!1;const n=e.currentTarget,i=document.elementsFromPoint(e.clientX,e.clientY);let o=null,s=this.layoutTree.getNodeByElement(n);for(let e of i){if(e===(null===(t=s.parent)||void 0===t?void 0:t.element))break;if(e.classList.contains("resize-splitter-zone")||e.classList.contains("resize-splitter")||e.classList.contains("dxbl-group-expand-btn"))return!1;if(e.classList.contains("dxbl-group-header")||e.classList.contains("dxbl-tabs")){o=e;break}}return(s.type===d.Item||null!=o)&&(e.preventDefault(),e.stopImmediatePropagation(),this.startDraggingAsync(e.clientX,e.clientY,s),!0)}onPointerDownForm(e){if(this.disposed||!this.designMode||this.currentDragTarget||0!==e.button||document.body.clientWidth<768)return!1;let t=e.target;if(0===t.children.length){if("input"===t.tagName.toLowerCase())return!1;t=t.parentElement}const n=t.querySelectorAll(`${this.options.formItemIdSelector}[${this.options.formItemIdAttributeName}]`);if(1!==n.length)return!1;const i=n.item(0).getAttribute(this.options.formItemIdAttributeName);if(null==i)return!1;let o=this.layoutTree.getNodeById(i);return(null!=o||(this.rebuildLayoutTree(),o=this.layoutTree.getNodeById(i),null!=o))&&(e.preventDefault(),e.stopImmediatePropagation(),this.startDraggingAsync(e.clientX,e.clientY,o),!0)}startDraggingAsync(e,t,n){this.stopDragActions(e,t);const i=this.componentReference.getElementTitleAsync(n.id);this.currentDragTarget=new m(n,i,e,t,this.layoutTree,this.draggingItem),this.currentDragTarget.start(),this.elementReference.classList.add("xaf-layouteditor-mode-dragging"),document.addEventListener("pointermove",this.onPointerMoveBound),document.addEventListener("pointerup",this.onPointerUpBound)}onPointerMove(e){!this.disposed&&this.designMode&&(this.currentDragTarget||this.currentResizeTarget)&&(e.preventDefault(),this.currentDragTarget?this.currentDragTarget.update(e.clientX,e.clientY):this.currentResizeTarget&&this.currentResizeTarget.update(e.clientX))}async onPointerUp(e){if(document.removeEventListener("pointermove",this.onPointerMoveBound),document.removeEventListener("pointerup",this.onPointerUpBound),this.currentDragTarget){const t=this.currentDragTarget.finish(e.clientX,e.clientY);this.elementReference.classList.remove("xaf-layouteditor-mode-dragging");const n=this.currentDragTarget.getTarget();this.currentDragTarget=null,t?await this.OnElementDroppedAsync(t):await this.OnElementSelectedAsync(n)}else if(this.currentResizeTarget){const e=this.currentResizeTarget.finish();this.elementReference.classList.remove("xaf-layouteditor-mode-resizing"),this.currentResizeTarget=null,e&&await this.OnElementResizedAsync(e)}}async onLayoutContextMenu(e){if(this.stopDragActions(e.clientX,e.clientY),document.body.clientWidth<768)return;let t=e.target.tagName.toLowerCase();if(!this.designMode&&("input"===t||"textarea"===t||"a"===t||"xaf-navigation-click-helper"===t))return;let n=e.composedPath(),i=n.findIndex((e=>e===this.containerElement));if(!(i<0)){if(i-=2,i>0){n.length=i;let e=n.reverse().find((e=>g.isLayoutRoot(e)));if(e&&!g.isLayoutRootFilter(e))return}e.preventDefault(),e.stopImmediatePropagation(),await this.OnElementContextMenuAsync("",e.clientX,e.clientY)}}async onFormContextMenu(e){var t,n;this.stopDragActions(e.clientX,e.clientY);let i=e.target,o=null;if(null===(t=this.layoutTree.getNodeById("xaf-layouteditor-menu-hiddenitems"))||void 0===t?void 0:t.element.contains(i))return;if(0===i.children.length){if("input"===i.tagName.toLowerCase())return;i=i.parentElement}const s=i.querySelectorAll(`${this.options.formItemIdSelector}[${this.options.formItemIdAttributeName}]`);(1===s.length||(null===(n=i.parentElement)||void 0===n?void 0:n.classList.contains("")))&&(o=s.item(0).getAttribute(this.options.formItemIdAttributeName)),e.preventDefault(),e.stopImmediatePropagation(),await this.OnElementContextMenuAsync(null!=o?o:"",e.clientX,e.clientY)}async onElementContextMenu(e){if(this.stopDragActions(e.clientX,e.clientY),document.body.clientWidth<768)return;let t=e.target,n=null;(this.designMode||"input"!==t.tagName.toLowerCase()||"textarea"!==t.tagName.toLowerCase())&&(this.designMode&&(n=this.layoutTree.getClosestNodeId(t)),e.preventDefault(),e.stopImmediatePropagation(),await this.OnElementContextMenuAsync(null!=n?n:"",e.clientX,e.clientY))}async OnElementDroppedAsync(e){await this.componentReference.onElementDroppedAsync({elementId:e.draggedNode.id,dropZoneId:e.dropZoneNode.id,position:e.position}),this.rebuildLayoutTree()}async OnElementSelectedAsync(e){await this.componentReference.onElementSelectedAsync(e.id),this.rebuildLayoutTree()}async OnElementResizedAsync(e){await this.componentReference.onElementResizedAsync({leftElementId:e.leftNode.id,rightElementId:e.rightNode.id,shiftRatio:e.shiftRatio}),this.rebuildLayoutTree()}async OnElementContextMenuAsync(e,t,n){await this.componentReference.onElementContextMenuAsync(e,t,n)}rebuildLayoutTree(){var e,t;this.clearLayoutTree(),[this.layoutTree,this.resizeSplitters]=this.buildLayoutTree(this.elementReference),null===(e=this.layoutTree.formElement)||void 0===e||e.addEventListener("pointerdown",this.onFormPointerDownBound),null===(t=this.layoutTree.formElement)||void 0===t||t.addEventListener("contextmenu",this.onFormContextMenuBound),this.layoutTree.forEach((e=>{e.element.addEventListener("pointerdown",this.onElementPointerDownBound),e.element.addEventListener("contextmenu",this.onElementContextMenuBound)})),this.resizeSplitters.forEach((([e,t])=>{t.addEventListener("pointerdown",this.onSplitterPointerDownBound)}))}clearLayoutTree(){var e,t;null===(e=this.layoutTree.formElement)||void 0===e||e.removeEventListener("pointerdown",this.onFormPointerDownBound),null===(t=this.layoutTree.formElement)||void 0===t||t.removeEventListener("contextmenu",this.onFormContextMenuBound),this.layoutTree.forEach((e=>{e.element.removeEventListener("pointerdown",this.onElementPointerDownBound),e.element.removeEventListener("contextmenu",this.onElementContextMenuBound)})),this.resizeSplitters.forEach((([e,t])=>{t.removeEventListener("pointerdown",this.onSplitterPointerDownBound),t.remove(),e.remove()})),this.resizeSplitters=[]}buildLayoutTree(e){const t=e.querySelectorAll(`${this.options.itemSelector}, ${this.options.groupSelector}, ${this.options.tabGroupSelector}, ${this.options.tabSelector}`),n=[],i={},o=[];let s=null;t.forEach((e=>{var t,r;if(!(e instanceof HTMLElement))throw new Error("!(element instanceof HTMLElement)");const l={element:e,id:e.getAttribute(e.matches(this.options.tabSelector)?this.options.tabIdAttributeName:this.options.idAttributeName),type:e.matches(this.options.itemSelector)?d.Item:e.matches(this.options.groupSelector)?d.Group:e.matches(this.options.tabGroupSelector)?d.TabGroup:d.TabContent,children:[],parent:null,next:null,prev:null};i[l.id]=l;let a=s;for(;null!==a;){if(a.element.contains(e)){l.parent=a;break}a=a.parent}let c=null!==(r=null===(t=l.parent)||void 0===t?void 0:t.children)&&void 0!==r?r:n;if(c.length>0){let t=c[c.length-1];if(t.next=l,l.prev=t,!e.classList.contains("dxbl-col-md-12")&&!t.element.classList.contains("dxbl-col-md-12")&&l.type!==d.TabContent){let t=document.createElement("div");t.classList.add("resize-splitter"),e.appendChild(t);let n=document.createElement("div");n.classList.add("resize-splitter-zone"),t.appendChild(n),o.push([t,n])}}c.push(l),s=l}));const r=this.customizationFormContent,l={element:r.querySelector(".xaf-layouteditor-menu-hiddenitems"),id:"xaf-layouteditor-menu-hiddenitems",type:d.Group,children:[],parent:null,next:null,prev:null};return i[l.id]=l,l.element.querySelectorAll(this.options.formItemIdSelector).forEach((e=>{const t={element:e,id:e.getAttribute(this.options.formItemIdAttributeName),type:d.Item,children:[],parent:l,next:null,prev:null};i[t.id]=t})),[new g(this.options,n,i,e,r),o]}dispose(){var e;this.disposed||(null===(e=this.containerElement)||void 0===e||e.removeEventListener("contextmenu",this.onLayoutContextMenuBound),this.setDesignMode(!1),this.disposed=!0)}}let y=!1;function b(e,t,n){return y||(y=!0,window.customElements.define("layout-editor",f)),new v(e,new p(t),n)}const w='component: { name: "dx-filtereditor-plain", params: { options: options, fieldListProvider: fieldListProvider, displayNameProvider: displayNameProvider }}',E={},x={};async function L(e,t,n){return new Promise(((i,o)=>{var s;const r=null!==(s=e[t])&&void 0!==s?s:e["."+t];r?i(r):n.invokeMethodAsync("GetItems",t).then((n=>{e[t]=JSON.parse(n),i(e[t])}))}))}async function I(e,t,n,i){if(!n)return(new window.DevExpress.Analytics.Internal.DxDeferred).resolve("").promise();const o=E[x[e].currentType];if(!o)return(new window.DevExpress.Analytics.Internal.DxDeferred).resolve("").promise();const s=o.cacheItems,r=n.split("."),l=[],a=new window.DevExpress.Analytics.Internal.DxDeferred;let d="",c=!1;for(const e of r){const n=await L(s,t+d,i);if(!n){c=!0;break}const o=n.find((t=>t.name==e));if(!o){c=!0;break}l.push(o.displayName),d+=t||d?`.${e}`:e}const u=c?n:l.join(".");return a.resolve(u),a.promise()}function D(e){return document.querySelector(`#${e} .filter-editor`)}function C(){const e=document.querySelectorAll("dxbl-modal-dialog");return e.length?`#${e[e.length-1].id}`:"body"}function T(e,t,n){const i=new window.DevExpress.Analytics.Widgets.FilterStringPlainOptions(window.ko.observable(t.filter));i.disabled(t.disabled),i.popupContainer=C(),i.advancedModePosition="BottomLeft",i.helper.getDisplayPropertyName=(t,i)=>{const o=new window.DevExpress.Analytics.Internal.DxDeferred;return I(e,t,i,n).then((e=>{o.resolve(e)})),o.promise()},i.value.subscribe((e=>{const t=document.querySelector(".filter-editor-accept-btn");null==t||t.classList.add("dxbl-disabled"),null==t||t.setAttribute("disabled",""),n.invokeMethodAsync("ValueChanging",e).catch((()=>{}))}));const o=function(e){let t;return function(...n){t&&clearTimeout(t),t=setTimeout((()=>{e.apply(this,n)}),300)}}((e=>{n.invokeMethodAsync("ValueChanged",e).catch((()=>{}))}));return i.value.subscribe(o),i}function A(e,t,n){const i=T(e,t,n);x[e]={currentType:t.typeFullName,options:i};const o=function(e,t){return{getItems:function(n){var i;const o=new window.DevExpress.Analytics.Internal.DxDeferred;if("Parameters"===n.ref)o.resolve([]);else{const s=E[i=x[e].currentType]||(E[i]={cacheItems:{},cacheValues:{}});s.cacheItems[n.fullPath]?o.resolve(s.cacheItems[n.fullPath]):t.invokeMethodAsync("GetItems",n.fullPath).then((e=>{s.cacheItems[n.fullPath]=JSON.parse(e),o.resolve(s.cacheItems[n.fullPath])}))}return o.promise()},getValues:function(n){var i;const o=new window.DevExpress.Analytics.Internal.DxDeferred,s=E[i=x[e].currentType]||(E[i]={cacheItems:{},cacheValues:{}});return s.cacheValues[n.fullPath]?o.resolve(s.cacheValues[n.fullPath]):t.invokeMethodAsync("GetValues",n.path).then((e=>{s.cacheValues[n.fullPath]=JSON.parse(e),o.resolve(s.cacheValues[n.fullPath])})),o.promise()}}}(e,n),s=function(e,t){return{getDisplayNameByPath:function(n,i){const o=new window.DevExpress.Analytics.Internal.DxDeferred;return I(e,n,i,t).then((e=>{o.resolve(e)})),o.promise()},getRealName:function(n,i){const o=new window.DevExpress.Analytics.Internal.DxDeferred;return async function(e,t,n,i){const o=E[x[e].currentType];if(!o)return(new window.DevExpress.Analytics.Internal.DxDeferred).resolve(n).promise();const s=o.cacheItems,r=n.split("."),l=[],a=new window.DevExpress.Analytics.Internal.DxDeferred;let d=t;for(const e of r){const t=await L(s,d,i),n=null==t?void 0:t.find((t=>t.displayName===e));n?(d+=d?`.${n.name}`:n.name,l.push(n.name)):l.push(e)}return a.resolve(l.join(".")),a.promise()}(e,n,i,t).then((e=>{o.resolve(e)})),o.promise()}}}(e,n);let r={options:window.ko.observable(i),fieldListProvider:o,displayNameProvider:s,getPopupContainer:()=>C()};if(i.disabled())S(e,t.cssClass,r);else{const n=o.getItems({fullPath:"",path:""});n.always&&n.always((()=>{S(e,t.cssClass,r)}))}}function S(e,t,n){document.getElementById(e).className=t;const i=D(e);null==i||i.classList.add("dx-designer","dx-designer-viewport");const o=document.createElement("div");o.setAttribute("data-bind",w),o.classList.add("dx-filtereditor-plain"),null==i||i.appendChild(o),window.ko.applyBindings(n,i)}const P={Init:(e,t,n)=>{window.DevExpress.Analytics.Internal.useKoIntegration(),window.DevExpress.Analytics.Utils.addToBindingsCache(w,((e,t)=>({component:function(){return{name:"dx-filtereditor-plain",params:{options:e.$data.options,fieldListProvider:e.$data.fieldListProvider,displayNameProvider:e.$data.displayNameProvider}}}}))),function(e,t){var n=[];if(e.customizeLocalization){const t=function(e){let t=window;for(var n=(e=e.replace(/\"/gi,"")).split("."),i=0;i<n.length-1;i++)if(t=t[n[i]],void 0===t)return;return t[n[n.length-1]]}(e.customizeLocalization);"function"==typeof t?function(e,t,n){t(e,{LoadMessages:e=>{e&&("function"==typeof e.then?n.push(e):window.DevExpress.Analytics.Localization.loadMessages(e))},WidgetLocalization:window.DevExpress.localization})}(e,t,n):console.error("Client-side event "+e.customizeLocalization+" was skipped: function "+e.customizeLocalization+" not found.")}window.DevExpress.Analytics.Internal.resolveFromPromises(n,t)}(e,(()=>A(t,e,n)))},SetParameters:(e,t)=>{if(!x[t])return;const{currentType:n,options:i}=x[t],{typeFullName:o,cssClass:s,filter:r,disabled:l}=e;n!==o&&(x[t].currentType=o),i.value()!==r&&i.value(r),i.disabled()!==l&&i.disabled(l);const a=document.getElementById(t);a&&a.className!==s&&(a.className=s)},SetInvalidState:(e,t)=>{const n=document.getElementById(t);null==n||n.classList.toggle("invalid-value",!!e),null==n||n.setAttribute("data-invalid-message",e||"")},Dispose:e=>{const t=D(e);t&&(window.ko.cleanNode(t),delete x[e])}},R={},M=e=>{const t=new a;t.canShowFileDialog(e)&&t.open(e)},k={Init:(e,t)=>{R[e.inputId]={dotNetReference:t,attachmentButtonId:e.attachmentButtonId,uploadElementId:e.uploadElementId,isFileDataEmpty:e.isFileDataEmpty,isModified:e.isModified};const n=document.getElementById(e.inputId),i=document.getElementById(e.attachmentButtonId);null==n||n.addEventListener("click",(async t=>{const n=R[e.inputId];n.isFileDataEmpty||n.isModified?M(e.uploadElementId):R[e.inputId].dotNetReference.invokeMethodAsync("DownloadFile")})),null==i||i.addEventListener("click",(t=>{M(e.uploadElementId)}))},DownloadHandler:e=>{R[e].dotNetReference.invokeMethodAsync("DownloadFile")},SetParameters:e=>{R[e.inputId].isFileDataEmpty!==e.isFileDataEmpty&&(R[e.inputId].isFileDataEmpty=e.isFileDataEmpty),R[e.inputId].isModified!==e.isModified&&(R[e.inputId].isModified=e.isModified)},DownloadFile:(e,t)=>{var n=document.createElement("a");n.href=e,n.download=e,n.onclick=e=>e.stopPropagation(),n.innerText=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},Dispose:e=>{delete R[e]}};class N{constructor(e,t){this.mainElementId="",this.closeOutsideClickController=new o,this.buttonSelector=e,this.modalBackDropSelector=t,this.onKeyUp=e=>{"ESCAPE"===(null==e?void 0:e.key.toUpperCase())&&this.closeOutsideClickController.isVisible(this.mainElementId)&&this.hide()}}init(e){var t;this.mainElementId=e,this.mainElement=document.getElementById(this.mainElementId);const n=null===(t=this.mainElement)||void 0===t?void 0:t.querySelector(this.buttonSelector),i=document.querySelector(this.modalBackDropSelector);null==n||n.addEventListener("click",(e=>this.toogle())),document.body.addEventListener("keyup",this.onKeyUp),null==i||i.addEventListener("click",(e=>this.hide()))}toogle(){this.closeOutsideClickController.toggle(this.mainElementId,this.modalBackDropSelector)}hide(){this.closeOutsideClickController.hide(this.mainElementId)}}let B=!1,z=null,O=0,H=!0,F=!1,q=null,V=null,$=new Map;function _(e,t){$.set(e,t),document.querySelector(`[pane-id='${e}'] > .xaf-masterdetail-splitter`).addEventListener("pointerdown",X)}function W(e){$.delete(e)}function U(e){return document.querySelector(`[pane-id='${e}'] > .xaf-masterdetail-first-pane`)}function G(e){return document.querySelector(`[pane-id='${e}'] > .xaf-masterdetail-view:not(.xaf-masterdetail-first-pane)`)}function X(e){if(B)return;e.preventDefault(),e.stopImmediatePropagation(),B=!0,z=e.currentTarget,z.setPointerCapture(e.pointerId),q=e.currentTarget.parentElement.getAttribute("pane-id"),V=U(q),F=V.classList.contains("xaf-relative-positioning");const t=getComputedStyle(V);H=V.parentElement.classList.contains("direction-horizontal");const n=Number.parseInt(H?t.width:t.height),i=G(q);V.style.flexGrow="0",V.style.flexShrink="1",i.style.flexGrow="1",i.style.flexShrink="1",i.style.flexBasis=H?"0":"0%";const o=function(){B&&(V.style.flexBasis=F?Y(n+O)+"%":n+O+"px",requestAnimationFrame(o))};document.addEventListener("pointermove",H?Z:j),document.addEventListener("pointerup",K,{once:!0}),requestAnimationFrame(o)}function Y(e){return e/V.parentElement.getBoundingClientRect()[H?"width":"height"]*100}function Z(e){O+=e.movementX}function j(e){O+=e.movementY}function K(e){if(!B)return;B=!1,document.removeEventListener("pointermove",H?Z:j);const t=V.getBoundingClientRect()[H?"width":"height"];var n,i;n=$.get(Number.parseInt(q)),i=F&&H?Y(t):t,n&&n.invokeMethodAsync("UpdateSplitterPosition",i),z.releasePointerCapture(e.pointerId),z=null,O=0,q=null,V.style.flexBasis=F&&H?Y(t)+"%":t+"px",V=null}function J(e,t){var n;const i=U(e);i&&(i.style.cssText="");const o=G(e);o&&(o.style.cssText="");const s=function(e){return document.querySelector(`[pane-id='${e}'] > .xaf-masterdetail-splitter`)}(e);if(t>0&&F){const e=getComputedStyle(s),i=(s.offsetWidth+Number(e.marginLeft.replace("px",""))+Number(e.marginRight.replace("px","")))/Number(null===(n=s.parentElement)||void 0===n?void 0:n.offsetWidth)*100;o.style.flexBasis=100-t-i+"%"}}function Q(e,t){const n=U(e);n&&(n.style.cssText="",n.style.flexBasis=t+"px");const i=G(e);i&&(i.style.cssText="")}class ee extends HTMLElement{constructor(){super(),this._isInitialized=!1}connectedCallback(){this._isInitialized||(this._isInitialized=!0,this.addEventListener("contextmenu",(e=>{const t=e.composedPath().find((e=>{var t;return null===(t=e.classList)||void 0===t?void 0:t.contains("xaf-prevent-contextmenu")})),n=e.composedPath().find((e=>{var t;let n=null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase();return"a"===n||"input"===n}));n?e.stopImmediatePropagation():t&&e.preventDefault()})))}}const te=new class{constructor(){this.IsNewReport=!1,this.ParametersTypesKeysCache=new Set}reportViewerCreated(e){window.xaf.resizeObserverUtils.subscribeToResizeObservers("#"+e)}reportViewerDestroyed(e){window.xaf.resizeObserverUtils.unsubscribeFromResizeObservers("#"+e),window.xaf.reportDesignerInstance=void 0,window.xaf.reportDesignerActions=void 0}nativeReportViewerCreated(e){this.reportViewerCreated(e)}nativeReportViewerDestroyed(e){this.reportViewerDestroyed(e)}onBeforeRenderReportDesigner(e,t){if(this.IsNewReport)var n=e.GetDesignerModel().navigateByReports.currentTab.subscribe((t=>{e.RunWizard("DesignInReportWizard"),n.dispose(),t.url("")}));e.GetDesignerModel().undoEngine.subscribe((e=>{e.isDirty.subscribe((e=>{(async()=>{await this.DxReportDesignerContainerReference.invokeMethodAsync("InvokeReportModified",e)})()}))})),window.xaf.reportDesignerInstance=e}setIsNewReport(e){this.IsNewReport=e}setParametersTypes(e){this.ParametersTypes=e}setHiddenReportDesignerActions(e){this.HiddenReportDesignerActions=e}setDxReportDesignerContainerReference(e){this.DxReportDesignerContainerReference=e}onCustomizeMenuActionsReportDesigner(e,t){this.ParametersTypes&&(this.initParametersTypes(e),this.ParametersTypes=null);var n=t.GetById(e.dx.Reporting.Designer.Actions.ActionId.Save);if(n){n.container="toolbar",t.Actions.splice(t.Actions.indexOf(n),1),t.Actions[0].hasSeparator=!0,t.Actions.splice(0,0,n);var i=n.clickAction,o=async()=>await this.DxReportDesignerContainerReference.invokeMethodAsync("InvokeReportSaved");n.clickAction=async function(){var t=e.GetDesignerModel().navigateByReports.currentTab();if(t.context().url())i(),t.undoEngine.clearHistory(),o();else{var n=e.GetDesignerModel().model().serialize();e.dx.Reporting.Designer.ReportStorageWeb.setNewData(n,"").done((n=>{t.context().url(n),t.undoEngine.clearHistory(),o(),e.dx.Analytics.Internal.ShowMessage(e.dx.Analytics.Utils.getLocalization("The report has been successfully saved.","ASPxReportsStringId.ReportDesigner_SaveReport_Message_OK"),e.dx.Analytics.Internal.NotifyType.success)})).fail((function(e){}))}}}for(let e=0;e<this.HiddenReportDesignerActions.length;++e){var s=t.Actions.filter((t=>t.id===this.HiddenReportDesignerActions[e]));s.length>0&&t.Actions.splice(t.Actions.indexOf(s[0]),1)}window.xaf.reportDesignerActions=t}onBeforeRenderReportViewer(e,t){t.reportPreview.zoom=1,window.addEventListener("beforeunload",(()=>{e.Close()}),!1)}initParametersTypes(e){for(var t in this.ParametersTypes)this.ParametersTypesKeysCache.has(t)||(e.AddParameterType({value:t,displayValue:this.ParametersTypes[t],defaultValue:"",typeImage:""},null),this.ParametersTypesKeysCache.add(t))}};(new class{constructor(){this.toolbarObservers=[]}getAppElement(){return document.querySelector("app")}createToolbarObserver(e){let t=new MutationObserver(((e,t)=>{let n=e.find((e=>"attributes"==e.type));if(n&&!n.target.classList.contains("dxbl-loading")){let e=this.toolbarObservers.indexOf(t);-1!==e&&this.toolbarObservers.splice(e,1),t.disconnect(),0==this.toolbarObservers.length&&this.hideLoadingPanel()}}));this.toolbarObservers.push(t),t.observe(e,{attributes:!0})}hideLoadingPanel(){const e=document.getElementById("applicationLoadingPanel");e&&e.remove();let t=this.getAppElement();t.style.visibility="",t.style.opacity=""}isAppLoaded(e=void 0){let t=this.getAppElement();if(t&&t.innerText&&t.innerText.trim()){t.classList.remove("d-none"),e&&e.disconnect();let n=document.querySelectorAll(".dxbl-loading");return n.length>0?(t.style.visibility="hidden",t.style.opacity="0",n.forEach((e=>{this.createToolbarObserver(e)}))):this.hideLoadingPanel(),!0}return!1}runObserver(){this.isAppLoaded()||new MutationObserver(((e,t)=>{this.isAppLoaded(t)})).observe(document.body,{childList:!0,subtree:!0})}}).runObserver();const ne=new class{toogleDetailedErrorDescription(){const e=document.getElementById("error-detailed");e&&(e.style.maxHeight=e.style.maxHeight?"":e.scrollHeight+2+"px",e.classList.toggle("show"))}getErrorPage(){return document.getElementById("xaf-error-page")}registerErrorButtonHandlers(e){const t=e.querySelector(".error-btn-refresh");t instanceof HTMLElement&&t.addEventListener("click",(e=>window.location.reload()));const n=e.querySelector(".error-btn-copy-details");n instanceof HTMLElement&&n.addEventListener("click",(t=>this.copyErrorDetailsToClipboard(e)))}copyErrorDetailsToClipboard(e){const t=e.querySelector(".error-detailed");t&&navigator.clipboard.writeText(t.innerText)}runObserver(){var e=this.getErrorPage();e?this.registerErrorButtonHandlers(e):new MutationObserver(((e,t)=>{var n=this.getErrorPage();n&&(t.disconnect(),this.registerErrorButtonHandlers(n))})).observe(document.body,{childList:!0,subtree:!0})}};ne.runObserver();const ie={device:new class{isMobile(){return innerWidth<=576}isTouchDevice(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}},ConfirmUnsavedChangesController:new class{constructor(){this.boundOnCustomOnBeforeUnload=this.CustomOnBeforeUnload.bind(this),this._isModified=!1,window.addEventListener("beforeunload",this.boundOnCustomOnBeforeUnload,!1)}SetModified(e){this._isModified=e}CustomOnBeforeUnload(e){if(this.IsModified())return e.returnValue=!1,!1}IsModified(){return this._isModified}},createDropDownPositionController:class{constructor(e,t){const n=parseFloat(getComputedStyle(t).bottom),i=t.scrollHeight+1.5*n,o=.5*n-e.scrollHeight,s=document.createElement("div");s.style.position="absolute",s.style.bottom=e.scrollHeight+i-12+"px",e.parentElement.appendChild(s),e.style.right=getComputedStyle(t).right,e._observer=new IntersectionObserver((t=>{let n=t[0];n.target===s&&(e.style.bottom=`${n.isIntersecting?i:o}px`)})),e._observer.observe(s),e._onhide=()=>{e._observer&&(e.parentElement.removeChild(s),e._observer.disconnect(),delete e._observer,delete e._onhide)}}},closeOutsideClickController:new o,themeService:new class{setCookie(e,t){document.cookie=`${e}=${encodeURIComponent(t)};max-age=94608000;path=/;samesite=none;secure`}setSizeMode(e,t){this.setCookie(e,t)}setCurrentCulture(e,t){this.setCookie(e,t)}async setTheme(e,t,n,i,o){const l=document.getElementById(e);if(!l)return void console.error(`Cannot find link element with id: "${e}"`);const a=Array.from(document.querySelectorAll("link[custom-link]"));function d(t,n,i=!0){const o=document.createElement("link");let s,r;o.type="text/css",o.rel="stylesheet",o.href=t,n||o.setAttribute("custom-link","");const a=new Promise(((e,t)=>{s=e,r=t}));return o.addEventListener("load",(e=>s())),o.addEventListener("error",(e=>r())),n&&i?(l.id="",o.id=e,l.after(o)):document.head.appendChild(o),a}const c=[d(i,!0),async function(e){const t=document.querySelector(`link[href="${r}"]`);s.test(e)&&t?t.remove():s.test(e)||t||await d(r,!0,!1)}(i),...(null!=o?o:[]).map((e=>d(e,!1)))];try{await Promise.all(c)}catch{return void console.error(`Failed setting the current theme with arguments: ${JSON.stringify(arguments)}`)}a.concat(l).forEach((e=>e.remove())),this.setCookie(t,n)}},uploadComponent:new a,imageComponent:new class{initClick(e,t){let n=null==t?void 0:t.closest(".dxbl-menu-item, .dxbl-context-menu-template");null==n||n.addEventListener("click",(()=>{window.xaf.uploadComponent.open(e)}))}initOverlayElement(e,t,n){null==t||t.addEventListener("click",(async()=>{if("true"===t.getAttribute("data-image-loaded")){let n=t.getBoundingClientRect();var i=n.left+n.width/2,o=n.top+n.height/2;e.invokeMethodAsync("OverlayClick",i,o)}else window.xaf.uploadComponent.open(n)}))}},alert:new class{constructor(){this.userDuration=3e3,this.disableScrollRequestsCount=0}onElementRemovedFromDOM(e,t){let n=e.parentNode,i=new MutationObserver((n=>{n.forEach((n=>{n.removedNodes.forEach((n=>{n===e&&(i.disconnect(),t())}))}))}));i.observe(n,{childList:!0}),e.disconnectRemovedFromDomObserver=function(){i.disconnect()}}toggleScrolling(e){e?this.disableScrollRequestsCount--:this.disableScrollRequestsCount++,document.querySelector(".xaf-alerts-stack-scrollable").classList.toggle("scrolling-enabled",0===this.disableScrollRequestsCount)}addAnimationEndEventListener(e,t){e.animationEndCallback&&e.animationEndCallback(),e.animationEndCallback=t,this.onElementRemovedFromDOM(e,t),e.addEventListener("animationend",t)}removeAnimationEndEventListener(e,t){delete e.animationEndCallback,e.disconnectRemovedFromDomObserver&&e.disconnectRemovedFromDomObserver(),e.removeEventListener("animationend",t)}addAnimation(e,t){e.classList.add("show"),e.classList.toggle("showing",t),e.classList.toggle("hiding",!t)}removeAnimation(e,t){e.classList.toggle("show",t),e.classList.remove("showing"),e.classList.remove("hiding")}getAlerts(e){var t=e||"";return Array.from(document.querySelectorAll(".xaf-alerts-stack .xaf-alert"+t))}addAnimationToAlreadyDisplayedAlerts(e,t){const n=this.getAlerts(":not(.xaf-alert-summary)");n.forEach(((i,o)=>{if(i!==e){var s=()=>{i.classList.remove("showing"),i.classList.remove("moving-down"),this.removeAnimationEndEventListener(i,s)},r=e=>{this.addAnimationEndEventListener(i,s),i.classList.add(e)};t?r("showing"):i.classList.contains("hiding")||(o<n.indexOf(e)||e.classList.contains("xaf-alert-summary"))&&r("moving-down")}}))}setVisible(e,t,n){return this.toggleScrolling(!1),!t&&this.timeoutId&&(clearTimeout(this.timeoutId),delete this.timeoutId),new Promise(((i,o)=>{var s=n=>{this.removeAnimation(e,t),this.removeAnimationEndEventListener(e,s),this.toggleScrolling(!0),n?i(void 0):o()};this.addAnimationEndEventListener(e,s),this.addAnimation(e,t),n||this.addAnimationToAlreadyDisplayedAlerts(e,t)}))}autoCloseAlerts(e){this.userDuration=e,window.xaf.device.isMobile()||(clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{var e=document.querySelector(".xaf-alerts-stack:not(.xaf-alerts-stack-no-limit-count) #xaf-alert-summary-close-all-button");e&&e.click(),delete this.timeoutId}),e))}closeAlerts(){var e=this.getAlerts(":not(.xaf-alert-summary)");return Promise.all(e.map((e=>this.setVisible(e,!1,!0))))}initAlertButton(e){null==e||e.addEventListener("click",(e=>{e.target instanceof HTMLElement&&e.target.closest(".xaf-alert-settings-container").classList.toggle("hover")}))}initAlertHandlers(e){null==e||e.addEventListener("mouseenter",(e=>{clearTimeout(this.timeoutId),delete this.timeoutId})),null==e||e.addEventListener("mouseleave",(e=>{this.autoCloseAlerts(this.userDuration)}))}},getColumnChooserTargetSelector:function(e){const t="."+e,n=document.querySelector(t);if(n&&"none"===getComputedStyle(n).display){const e=n.closest(".dxbl-toolbar").querySelector(".dxbl-toolbar-btn-ellipsis").getAttributeNode("data-dxtoolbar-ellipsis-dropdown-id");return"["+e.name+'="'+e.value+'"]'}return t},focusViewItem:function(e){let t="div[data-item-name='"+(e=e&&e.replace?e.replace(/\\/g,"\\\\").replace(/'/g,"\\'"):e)+"'] ~ * input, div[data-item-name='"+e+"'] ~ * textarea";return se((()=>t),"dxbl-fl","dxbl-fl-loading")},focusToolbarAction:function(e){return se((()=>e),"dxbl-toolbar","dxbl-loading")},closeSideBarIfMobile:function(){if(window.xaf.device.isMobile()){var e=document.getElementsByClassName("app")[0];e.classList.remove("collapse-toggle"),ae(e)}},toggleSideBar:le,setStopPropagationHandler:function(e){e instanceof HTMLElement&&e.addEventListener("click",(e=>e.stopPropagation()))},bindButtonToContainer:function(e){const t=document.getElementById(e).closest(".parametrized-action-wrapper").querySelector("input");t&&t.addEventListener("keypress",(n=>{"Enter"===n.key&&(t.blur(),setTimeout((function(){const n=document.getElementById(e);n.focus(),n.click(),t.focus()})))}))},initApplicationWindowTemplate:function(){var e,t;null===(e=document.querySelector(".btn-hamburger"))||void 0===e||e.addEventListener("click",(e=>le())),null===(t=document.querySelector(".sidebar-sm-shadow"))||void 0===t||t.addEventListener("click",(e=>le())),ae(document.getElementsByClassName("app")[0]);const n=document.getElementById("skip-navigation-link");n&&n.addEventListener("click",(e=>{var t;e.preventDefault(),null===(t=document.getElementById("main-view-content"))||void 0===t||t.focus()}))},resetMainContentScrollPosition:function(){if(-1===["input","textarea","button","select"].indexOf(document.activeElement.tagName.toLowerCase())){var e=document.getElementsByClassName("main-content")[0];e&&(e.scrollTop=0,e.scrollLeft=0)}},registerErrorButtonHandlers:ne.registerErrorButtonHandlers,registerErrorButtonHandlersForPopup:function(e){ne.registerErrorButtonHandlers(re(e,"dxbl-modal-content"))},setPageTitle:function(e){document.title=e},setLangAttribute:function(e){document.documentElement.lang=e},initLightModeObjectLink:function(e,t){var n=async function(){let e=window.open("about:blank","_blank");if(e){let n=await t.invokeMethodAsync("GetCurrentUrl");e.location=n}};null==e||e.addEventListener("click",(async e=>{e.preventDefault(),e.stopPropagation(),e.ctrlKey?n():await t.invokeMethodAsync("SimpleClick")})),null==e||e.addEventListener("auxclick",(async e=>{e.preventDefault(),1===e.button&&n()}))},easytest:new class{constructor(){this._dataReceivedCallCount=0,this._currentID=""}start(){return this._currentID="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),this.dataReceiveObserver=new MutationObserver((()=>{this._dataReceivedCallCount++})),this.dataReceiveObserver.observe(document.body,{childList:!0,subtree:!0}),this._currentID}stop(){this.dataReceiveObserver&&(this.dataReceiveObserver.disconnect(),this.dataReceiveObserver=void 0)}get dataReceivedCallCount(){return this._dataReceivedCallCount}get currentId(){return this._currentID}},progressBar:new class{setProgress(e,t){e.setAttribute("style","width: "+t+"%;"),e.setAttribute("aria-valuenow",t.toString())}hide(e){setTimeout((()=>{e.parentElement.classList.add("d-none"),this.setProgress(e,0)}),400)}update(e,t,n){var i=Math.floor(100*t/n);e.parentElement.classList.contains("d-none")&&e.parentElement.classList.remove("d-none"),this.setProgress(e,i)}},loadingIndicator:new class{constructor(){this.delayTimeout=200,this.containerEl=()=>document.getElementById("xaf-loading"),this.indicatorEl=()=>document.querySelector("#xaf-loading .xaf-loading-content")}isShowing(){return"xaf-loading show"===this.containerEl().className}show(){this.startTime=void 0,this.containerEl().className="xaf-loading show",this.timer=setTimeout((()=>{var e=this.indicatorEl();e&&(e.style.visibility="visible",e.style.backgroundColor=getComputedStyle(document.body).backgroundColor,this.startTime=Date.now())}),this.delayTimeout)}hide(){clearTimeout(this.timer);var e=this.startTime&&Date.now()-this.startTime;e&&e>this.delayTimeout?(this.indicatorEl().style.visibility="hidden",this.containerEl().className="xaf-loading"):setTimeout((()=>{this.indicatorEl().style.visibility="hidden",this.containerEl().className="xaf-loading"}),this.delayTimeout)}},resizeObserverUtils:new class{constructor(){this.subscribers=new Map}subscribeToResizeObservers(e){var t=document.querySelectorAll(e);if(t.length>1)return;if(0==t.length)return void window.xaf.resizeObserverUtils.unsubscribeFromResizeObservers(e);const n=t[0].closest(".dxbl-modal-body, .main.xaf-flex-auto > .main-content");if(n&&!this.subscribers.has(e))try{const t=new ResizeObserver((t=>{t.forEach((t=>{window.xaf.resizeObserverUtils.updateContainerViewPortHeight(t.target,e)}))}));this.subscribers.set(e,t),t.observe(n)}catch(e){}finally{window.xaf.resizeObserverUtils.updateContainerViewPortHeight(n,e)}}updateContainerViewPortHeight(e,t){var n=document.querySelectorAll(t);if(!(n.length>1))if(0!=n.length){var i=n[0];i&&(i.style.height=window.xaf.resizeObserverUtils.getContainerViewPortHeight(e,i))}else window.xaf.resizeObserverUtils.unsubscribeFromResizeObservers(t)}getContainerViewPortHeight(e,t){const n=["margin-top","margin-bottom","padding-top","padding-bottom","border-top-width","border-bottom-width"];var i=0,o=getComputedStyle(e);n.forEach((e=>{i+=parseFloat(o[e])}));for(var s=t;s&&s!==e;s=s.parentElement)o=getComputedStyle(s),n.forEach((e=>{i+=parseFloat(o[e])}));return e.clientHeight-Math.round(i)+"px"}unsubscribeFromResizeObservers(e){const t=this.subscribers.get(e);t&&(this.subscribers.delete(e),t.disconnect())}},reportViewerCreated:te.reportViewerCreated.bind(te),reportViewerDestroyed:te.reportViewerDestroyed.bind(te),nativeReportViewerCreated:te.nativeReportViewerCreated.bind(te),nativeReportViewerDestroyed:te.nativeReportViewerDestroyed.bind(te),onBeforeRenderReportDesigner:te.onBeforeRenderReportDesigner.bind(te),onCustomizeMenuActionsReportDesigner:te.onCustomizeMenuActionsReportDesigner.bind(te),setHiddenReportDesignerActions:te.setHiddenReportDesignerActions.bind(te),onBeforeRenderReportViewer:te.onBeforeRenderReportViewer.bind(te),setIsNewReport:te.setIsNewReport.bind(te),setParametersTypes:te.setParametersTypes.bind(te),setDxReportDesignerContainerReference:te.setDxReportDesignerContainerReference.bind(te),settingsComponent:new class extends N{constructor(){super(".theme-button",".theme-settings-modal-backdrop")}},accountComponent:new class extends N{constructor(){super(".account-button",".account-modal-backdrop")}},layoutEditor:t,filterEditor:P,fileDataEditor:k,splitter:n};function oe(e){var t=e.closest(".btn-group");t&&t.classList.add("group-has-template")}function se(e,t,n){if(!window.xaf.device.isTouchDevice()){const i=function(e){const t=document.querySelectorAll(e);return t.length>=1?t[t.length-1]:null}(e());if(!i)return;let o=re(i,t);o&&function(e,t,n){const i=()=>{e.focus(),e.scrollIntoView({block:"center"})},o=()=>document.getElementById("applicationLoadingPanel")||t&&n&&t.classList.contains(n);if(o()){const e=setInterval((()=>{o()||(clearInterval(e),setTimeout(i,0))}),0)}else setTimeout(i,0)}(i,o,n)}}function re(e,t){let n=e;for(;n&&!n.classList.contains(t);)n=n.parentElement;return n}function le(){const e=document.getElementsByClassName("app")[0];e.classList.toggle("collapse-toggle"),ae(e)}function ae(e){const t=document.querySelector(".btn-hamburger");if(e&&t){const n=t.dataset.visibleLabel||"",i=t.dataset.hiddenLabel||"";e.classList.contains("collapse-toggle")?(t.setAttribute("title",i),t.setAttribute("aria-label",i)):(t.setAttribute("title",n),t.setAttribute("aria-label",n))}}function de(e,t,n,i,o){e.addEventListener(t,(t=>{if(!(t.target instanceof Element))return;const s=t.target.closest(n);if(s&&e.contains(s)){if(s instanceof HTMLButtonElement&&(s.disabled||s.classList.contains("dxbl-disabled")))return;o(t)&&i.call(s,t)}}))}window.xaf=ie,customElements.define("xaf-navigation-click-helper",i),customElements.define("xaf-contextmenu-click-helper",ee),function(){let e=function(e){switch(!0){case e.indexOf("edg")>-1:return"edge";case e.indexOf("chrome")>-1:return"chrome";case e.indexOf("firefox")>-1:return"firefox";case e.indexOf("safari")>-1:return"safari"}}("undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"");e&&document.documentElement.classList.add(`xaf-${e}`)}(),new MutationObserver((function(e){e.forEach((function(e){for(let t=0;t<e.addedNodes.length;t++){const n=e.addedNodes[t];if(n.nodeType===Node.ELEMENT_NODE&&n instanceof HTMLElement){n.matches(".combobox-xaf-action, .parametrized-action-wrapper")&&oe(n);const e=n.querySelectorAll(".combobox-xaf-action, .parametrized-action-wrapper");for(let t=0;t<e.length;t++)oe(e[t])}}}))})).observe(document.body,{childList:!0,subtree:!0}),new MutationObserver((()=>{const e=document.querySelector("body > #components-reconnect-modal");if(e){const t=e.shadowRoot;if(t){const e=t.querySelector(".components-reconnect-dialog");e&&(e.style.backgroundColor="rgb(var(--bs-dark-rgb))");const n=t.querySelector(".components-reconnect-dialog p");n&&(n.style.color="rgb(var(--bs-white-rgb))");const i=t.querySelector(".components-reconnect-dialog button");i&&(i.style.backgroundColor="var(--bs-primary)")}else{e.classList.add("bg-dark","text-white");const t=document.querySelector("#components-reconnect-modal a");t&&t.classList.add("text-primary");const n=document.querySelector("#components-reconnect-modal button");n&&n.classList.add("btn","btn-primary","shadow-none")}}})).observe(document.body,{childList:!0,subtree:!0}),document.addEventListener("keypress",(function(e){if(e.target instanceof HTMLElement&&"input"===e.target.tagName.toLowerCase()&&13===e.keyCode&&!window.xaf.loadingIndicator.isShowing()){const t=document.querySelector(".logon-toolbar .dxbl-toolbar .dxbl-btn.dxbl-btn-primary");t&&(e.target.blur(),setTimeout((()=>{t.click()})))}})),de(document.querySelector("body"),"click",[".xaf-action:not(.dxbl-disabled)",".dxbl-listbox-item:not(.dxbl-listbox-item-selected) .xaf-combobox-action","[data-xaf-action] > button:first-child","button[data-xaf-action]",".xafPopup:not(.xaf-popup-dialog) button[data-qa-selector='dx-popup-close-button']",".xaf-close-tab-button",".xaf-tabbed-mdi .dxbl-tabs-item:has(.xaf-tab-header-template-clickable):not(.dxbl-active)"].join(", "),(()=>(window.xaf.loadingIndicator.show(),!1)),(e=>void 0===e.composedPath().find((e=>e instanceof HTMLElement&&(e.classList.contains("no-loading-indicator")||e.classList.contains("dxbl-grid-tree-node-expand-button")))))),de(document.querySelector("body"),"dblclick",".xaf-double-click",(()=>(window.xaf.loadingIndicator.show(),!1)),(e=>void 0===e.composedPath().find((e=>e instanceof HTMLElement&&e.classList.contains("no-loading-indicator"))))),window.addEventListener("online",(function(){window.xaf.loadingIndicator.hide()}))})();